<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8"><title>L.H.E.X | Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
<style>
    body { background: #000; color: #fff; font-family: 'Inter', sans-serif; display: flex; height: 100vh; margin: 0; overflow: hidden; }
    .sidebar { width: 260px; background: #050505; border-right: 1px solid #111; padding: 30px 20px; display: flex; flex-direction: column; }
    .main { flex: 1; padding: 40px; overflow-y: auto; background: radial-gradient(circle at top right, #111, #000); }
    .card { background: rgba(20,20,20,0.6); border: 1px solid #222; padding: 30px; border-radius: 16px; margin-bottom: 25px; backdrop-filter: blur(10px); }
    input, select, textarea { background: #080808; border: 1px solid #333; color: #fff; padding: 15px; width: 100%; border-radius: 10px; box-sizing: border-box; font-family: 'Inter'; font-size: 0.9rem; transition: 0.3s; }
    input:focus, textarea:focus { border-color: #00DFA2; outline: none; }
    button { background: #00DFA2; color: #000; padding: 15px; border: none; font-weight: bold; width: 100%; cursor: pointer; border-radius: 10px; font-size: 1rem; transition: 0.3s; margin-top: 10px; }
    button:hover { transform: scale(1.02); box-shadow: 0 0 20px rgba(0, 223, 162, 0.2); }
    h2 { font-size: 1.5rem; margin-top: 0; }
    .status { font-size: 0.8rem; padding: 5px 12px; border-radius: 20px; background: #111; border: 1px solid #333; display: inline-block; margin-top: auto; }
</style>
</head>
<body>

<div class="sidebar">
    <div style="font-weight: 700; font-size: 1.2rem; letter-spacing: 2px; color: #fff; margin-bottom: 40px;">L.H.E.X</div>
    <div style="color: #666; font-size: 0.8rem; margin-bottom: 5px;">USU√ÅRIO</div>
    <div style="color: #fff; font-weight: 600; margin-bottom: 30px;">{{ name }}</div>
    
    <div style="color: #00DFA2; background: #111; padding: 12px; border-radius: 8px; margin-bottom: 10px; font-size: 0.9rem;">üé® SOCIAL MEDIA IA</div>
    <div style="color: #666; padding: 12px; font-size: 0.9rem;">ü§ñ SDR WHATSAPP</div>
    
    <div class="status">SISTEMA: {{ status }}</div>
    <a href="/logout" style="color: #444; text-decoration: none; font-size: 0.8rem; margin-top: 20px;">SAIR</a>
</div>

<div class="main">
    <div class="card">
        <h2 style="color: #00DFA2;">Criar Conte√∫do High Ticket</h2>
        <p style="color: #888; margin-bottom: 20px;">Utilize a IA Generativa para criar posts virais com imagens exclusivas.</p>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <label style="color:#666; font-size:0.8rem">TEMA DO POST</label>
                <input id="tema" placeholder="Ex: Harmoniza√ß√£o Facial, Direito Trabalhista...">
            </div>
            <div>
                <label style="color:#666; font-size:0.8rem">TOM DE VOZ</label>
                <select id="tom">
                    <option>üíé Luxuoso & Autorit√°rio</option>
                    <option>üî• Vendas & Urg√™ncia</option>
                    <option>üí° Educativo & T√©cnico</option>
                </select>
            </div>
        </div>
        <button onclick="gerar()" id="btnG">GERAR CONTE√öDO ‚ú®</button>
    </div>

    <div class="card" id="resultado" style="display:none; animation: fadeIn 0.5s;">
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:30px">
            <div>
                <h3 style="margin-top:0">Imagem Gerada (Pollinations)</h3>
                <img id="imgRes" src="" style="width:100%; border-radius:10px; border:1px solid #333">
            </div>
            <div>
                <h3 style="margin-top:0">Legenda (Gemini)</h3>
                <textarea id="txtRes" rows="12"></textarea>
                <button onclick="copiar()" style="background:#fff; color:#000">COPIAR TEXTO</button>
            </div>
        </div>
    </div>

    <div class="card">
        <h3>üì≤ Conectar WhatsApp Business</h3>
        <p style="color:#888">Escaneie o QR Code para ativar o SDR Autom√°tico.</p>
        <button onclick="conectar()" style="background:#222; color:#fff; border:1px solid #444; width:auto; padding:10px 30px;">GERAR QR CODE</button>
        <br>
        <img id="qrCode" src="" style="display:none; width:200px; margin-top:20px; border: 5px solid #fff;">
    </div>
</div>

<script>
function gerar(){
    const b = document.getElementById('btnG'); b.innerText = "A INTELIG√äNCIA EST√Å CRIANDO... üß†"; b.style.opacity = "0.7";
    fetch('/api/gerar', {
        method:'POST', headers:{'Content-Type':'application/json'},
        body:JSON.stringify({tema:document.getElementById('tema').value, tom:document.getElementById('tom').value})
    }).then(r=>r.json()).then(d=>{
        b.innerText = "GERAR CONTE√öDO ‚ú®"; b.style.opacity = "1";
        if(d.success){
            document.getElementById('resultado').style.display='block';
            document.getElementById('imgRes').src=d.imagem;
            document.getElementById('txtRes').value=d.conteudo;
            document.getElementById('resultado').scrollIntoView({behavior:"smooth"});
        } else { alert("Erro: "+d.erro); }
    })
}
function conectar(){
    fetch('/api/connect_zap', {method:'POST'}).then(r=>r.json()).then(d=>{
        if(d.qr){ document.getElementById('qrCode').src=d.qr; document.getElementById('qrCode').style.display='block'; }
        else { alert("Erro ao conectar WhatsApp. Verifique o servidor."); }
    })
}
function copiar(){
    document.getElementById('txtRes').select(); document.execCommand('copy'); alert("Texto copiado!");
}
</script>
</body>
</html>
